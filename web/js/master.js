$(function() {  GetMap();  Redisplay();  $("#add-button").click(function(e) {    e.preventDefault();    addParameter();  });      // Add HUD functionalities to our modal boxes  $("#data-sources").hud({ position: 'bottom' });  $("#data").hud({ position: 'bottom' });  //$("#parameters").hud({ position: 'right' });    // Setup the HDF uploader  $("#upload-hdf").jup({ json: true, onComplete: displayHDFData });  // Resize the map whenever the window is resized  $(window).bind('load resize', Redisplay);  initDataTable();});/** * HUD Boxes * --------- * Draggable, movable, hidable boxes for showing different task modules */jQuery.fn.hud = function(options) {  var settings = jQuery.extend({    title: 'Datasets',    position: 'bottom',    width: 300  }, options);  // Wrap our content in an modal box  var container = $(document.createElement('div'));  container.addClass('hud-container');    // Add a title bar to our modal box  var titleBar = $(document.createElement('div'));  titleBar.addClass('hud-title');    // Position and size our modal box  container.width(settings.width);  if ('bottom' != settings.position) {    container.css('top', '0px');  }  container.css(settings.position, '0px');  this.css('border-' + settings.position + '-width', '0px');    this.show();  this.wrap(container);  container.append(titleBar);  return this;};/* Initialization */function Redisplay(){  $("#map").width($(window).width());  $("#map").height($(window).height() - 67);  map.Resize();}/* Virtual Earth Map */var map = null;function GetMap(){   map = new VEMap('map');   map.LoadMap();   map.SetMapStyle(VEMapStyle.Aerial);}/* Data Table */var dataTable = null;function initDataTable(){  dataTable = $('#data-table').dataTable({    "aoColumns": [      { "sTitle": "Date" },      { "sTitle": "Surf. Pressure" },      { "sTitle": "Air Temp." },      { "sTitle": "Rel. Hum." },      { "sTitle": "Cloud Cov." },      { "sTitle": "Precipitation" },      { "sTitle": "Down. Short. Rad." },      { "sTitle": "Down. Long. Rad. "}    ],   	"bSortClasses": false  });    $('#data-table tbody td').hover(function() {      var iCol = $('td').index(this) % 5;    	var nTrs = dataTable.fnGetNodes();    	$('td:nth-child('+(iCol+1)+')', nTrs).addClass('highlighted');    },    function() {    	var nTrs = dataTable.fnGetNodes();    	$('td.highlighted', nTrs).removeClass('highlighted');  });}/* Parameter List */function displayHDFData(response, formId){  dataTable.fnAddData([    [ 2010021818 , 1014 , 23 , 27 , "NaN" , "NaN" , "NaN" , "NaN" ],    [ 2010021821 , 1015.7 , 22.4 , 30.5 , 23 , 0 , 0 , 336 ],    [ 2010021900 , 1016.7 , 30.2 , 19.5 , 12 , 0 , 130 , 338 ],    [ 2010021903 , 1014.8 , 35.1 , 14 , 10 , 0 , 880 , 368 ],    [ 2010021906 , 1011.5 , 37.2 , 11.4 , 5 , 0 , 945 , 375 ],      [ 2010021909 , 1010 , 35.8 , 11.8 , 1 , 0 , 560 , 381 ],    [ 2010021912 , 1012.1 , 29.8 , 16.7 , 0 , 0 , 292 , 371 ],    [ 2010021915 , 1012.4 , 26.9 , 19.4 , 0 , 0 , 0 , 345 ],    [ 2010021918 , 1011.3 , 25.6 , 23.5 , 4 , 0 , 0 , 343 ]  ]);}